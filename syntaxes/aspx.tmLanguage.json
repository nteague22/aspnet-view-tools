{
    "name": "aspx",
    "fileTypes": [
        "*.aspx",
        "*.ascx",
        "*.master"
    ],
    "patterns": [{
            "name": "comment.block.aspx",
            "include": "#aspx-comment"
        },
        {
            "include": "#aspx-section"
        },
        {
            "include": "#aspx-embedded-style-tag"
        },
        {
            "include": "#aspx-html-tags"
        },
        {
            "include": "#aspx-html-close-tag"
        }
    ],
    "repository": {
        "aspx-embedded-style-tag": {
            "patterns": [
                {
                    "begin": "(<)(style)(>)",
                    "beginCaptures": {
                        "1": {
                            "name": "punctuation.definition.tag.begin.html.aspx"
                        },
                        "2": {
                            "name": "entity.name.tag.html.aspx"
                        },
                        "3": {
                            "name": "punctuation.definition.tag.end.html.aspx"
                        }
                    },
                    "end": "(</)(style)(>)",
                    "endCaptures": {
                        "1": {
                            "name": "punctuation.definition.tag.begin.html.aspx"
                        },
                        "2": {
                            "name": "entity.name.tag.html.aspx"
                        },
                        "3": {
                            "name": "punctuation.definition.tag.end.html.aspx"
                        }
                    },
                    "patterns": [{
                            "include": "#aspx-comment"
                        },
                        {
                            "include": "#aspx-section"
                        },
                        {
                            "include": "source.css"
                        }
                    ]
                }
            ]
        },
        "aspx-html-close-tag": {
            "patterns": [{
                "match": "(</)([^>]+)(>)",
                "captures": {
                    "1": {
                        "name": "punctuation.definition.tag.begin.html.aspx"
                    },
                    "2": {
                        "name": "entity.name.tag.html.aspx"
                    },
                    "3": {
                        "name": "punctuation.definition.tag.end.html.aspx"
                    }
                }
            }]
        },
        "aspx-html-tags": {
            "patterns": [{
                "begin": "(<)([!A-Za-z:\\-_]+)",
                "end": "(\/?>)",
                "captures": {
                    "1": {
                        "name": "punctuation.definition.tag.begin.html.aspx"
                    },
                    "2": {
                        "name": "entity.name.tag.html.aspx"
                    },
                    "3": {
                        "name": "punctuation.definition.tag.end.html.aspx"
                    }
                },
                "patterns": [{
                        "include": "#aspx-empty-attr"
                    },
                    {
                        "include": "#aspx-attribute-assignment"
                    }
                ]

            }]
        },
        "aspx-empty-attr": {
            "patterns": [{
                "match": "(?=\\b[a-zA-Z\\-_]+\\b)([a-zA-Z\\-_]+)",
                "name": "entity.other.attribute-name.html.aspx"
            }]
        },
        "aspx-html-tags-empty": {
            "patterns": [{
                "match": "(?=<[^%>\\s]+>)(<)([^<>]+)(\/?>)",
                "name": "entity.name.tag.empty.aspx",
                "captures": {
                    "1": {
                        "name": "punctuation.definition.tag.begin.html.aspx"
                    },
                    "2": {
                        "name": "entity.name.tag.html.aspx"
                    },
                    "3": {
                        "name": "punctuation.definition.tag.end.html.aspx"
                    }
                }
            }]
        },
        "aspx-attribute-assignment": {
            "patterns": [{
                "match": "(?==\"[^\"]+\"|='[^']+')(=)(\"[^\"]+\"|'[^']+')",
                "captures": {
                    "1": {
                        "name": "keyword.operator.aspx"
                    },
                    "2": {
                        "patterns": [{
                                "include": "#aspx-string-double"
                            },
                            {
                                "include": "#aspx-string-single"
                            }
                        ]
                    }
                }
            }]
        },
        "aspx-string-double": {
            "patterns": [{
                "begin": "\"",
                "beginCaptures": {
                    "0": {
                        "name": "punctuation.definition.string.begin.asp.aspx"
                    }
                },
                "end": "\"",
                "endCaptures": {
                    "0": {
                        "name": "punctuation.definition.string.end.asp.aspx"
                    }
                },
                "patterns": [{
                        "match": "(?!<%[^%>]+%>)([^\"]+)",
                        "captures": {
                            "1": {
                                "name": "string.quoted.double.html.aspx"
                            }
                        }
                    },
                    {
                        "match": "(?=[^\"]*<%[^%>]+%>[^\"]*)([^\"]*)(<%[^%>]+%>)([^\"]*)",
                        "captures": {
                            "1": {
                                "name": "string.quoted.double.html.aspx"
                            },
                            "2": {
                                "patterns": [{
                                    "include": "#aspx-section"
                                }]
                            },
                            "3": {
                                "name": "string.quoted.double.html.aspx"
                            }
                        }
                    }
                ]

            }]
        },
        "aspx-string-single": {
            "patterns": [{
                "begin": "'",
                "beginCaptures": {
                    "0": {
                        "name": "punctuation.definition.string.begin.asp.aspx"
                    }
                },
                "end": "'",
                "endCaptures": {
                    "0": {
                        "name": "punctuation.definition.string.end.asp.aspx"
                    }
                },
                "patterns": [{
                        "match": "(?!<%[^%>]+%>)([^']+)",
                        "captures": {
                            "1": {
                                "name": "string.quoted.single.html.aspx"
                            }
                        }
                    },
                    {
                        "match": "(?=[^']*<%[^%>]+%>[^']*)([^']*)(<%[^%>]+%>)([^']*)",
                        "captures": {
                            "1": {
                                "name": "string.quoted.single.html.aspx"
                            },
                            "2": {
                                "patterns": [{
                                    "include": "#aspx-section"
                                }]
                            },
                            "3": {
                                "name": "string.quoted.single.html.aspx"
                            }
                        }
                    }
                ]
            }]
        },
        "extended-operators": {
            "patterns": [{
                "match": "\\b(AndAlso|OrElse|IsNot|Is|As)\\b",
                "name": "keyword.control.aspx"
            }]
        },
        "aspx-type-def": {
            "patterns": [{
                    "match": "\\b(Of)\\b",
                    "name": "keyword.control.asp.aspx"
                },
                {
                    "match": "(?=\\bOf\\b\\s+)([A-Za-z_]+)",
                    "captures": {
                        "1": {
                            "name": "entity.name.type.aspx"
                        }
                    }
                },
                {
                    "match": "(?=\\G,\\s)([A-Za-z_]+)",
                    "captures": {
                        "1": {
                            "name": "entity.name.type.aspx"
                        }
                    }
                }
            ]
        },
        "aspx-code": {
            "patterns": [{
                    "begin": "\\(",
                    "beginCaptures": {
                        "0": {
                            "name": "punctuation.section.round-brackets.begin.asp.aspx"
                        }
                    },
                    "end": "\\)",
                    "endCaptures": {
                        "0": {
                            "name": "punctuation.section.round-brackets.end.asp.aspx"
                        }
                    },
                    "patterns": [{
                        "include": "#aspx-code"
                    }]
                },
                {
                    "include": "#aspx-type-def"
                },
                {
                    "include": "#extended-operators"
                },
                {
                    "include": "#aspx-class"
                },
                {
                    "include": "#aspx-class-property"
                },
                {
                    "include": "source.asp.vb.net"
                }
            ]
        },
        "aspx-section": {
            "patterns": [{
                "begin": "<%[@:=]?",
                "beginCaptures": {
                    "0": {
                        "name": "punctuation.definition.tag.begin.aspx"
                    }
                },
                "end": "%>",
                "endCaptures": {
                    "0": {
                        "name": "punctuation.definition.tag.end.aspx"
                    }
                },
                "patterns": [{
                    "include": "#aspx-code"
                }]
            }]
        },
        "aspx-comment": {
            "patterns": [{
                "begin": "<%--\\s*",
                "end": "\\s*--%>",
                "name": "comment.block.aspx"
            }]
        },
        "aspx-class": {
            "patterns": [{
                    "match": "\\b(Html|Url|Model|Request|Response|ViewContext|Controller|MvcHtmlString)\\b",
                    "captures": {
                        "1": {
                            "name": "support.type.aspx"
                        }
                    }
                },
                {
                    "match": "\\b([A-Z][A-Za-z]+)(?=(\\.[A-Za-z]+))",
                    "captures": {
                        "1": {
                            "name": "support.type.aspx"
                        }
                    }
                }
            ]
        },
        "aspx-class-property": {
            "patterns": [{
                "match": "\\.([A-Za-z\\-_]+)",
                "captures": {
                    "1": {
                        "name": "support.type.property-name.aspx"
                    }
                }

            }]
        }
    },
    "scopeName": "source.aspx"
}